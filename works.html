<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="–†–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä –∏ –æ—Ñ–∏—Å–æ–≤ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ ‚Äî –¥–∏–∑–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç—ã, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–æ–∫–∏, –≥–∞—Ä–∞–Ω—Ç–∏—è. –ó–∞–∫–∞–∂–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–º–µ—Ä –∏ —Å–º–µ—Ç—É."/>
  <title>–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã ‚Äî –†–µ–º–æ–Ω—Ç –°–ü–±</title>
  <link rel="stylesheet" href="./css/works.css" />
  <link rel="stylesheet" href="./css/style.css" />
</head>
<body>

  <!-- Topbar -->
  <div class="topbar">
    <div>–ü–ù‚Äì–í–°: 09:00‚Äì20:00</div>
    <div><a href="tel:+78122008071">+7 (964) 342-82-54</a></div>
    <div><a href="#contact" class="top-cta">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–º–µ—Ä –∏ —Å–º–µ—Ç–∞</a></div>
  </div>

  <!-- Header -->
  <header aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
    <div class="header-inner">
      <a class="brand" href="./index.html">
        <div class="logo">RS</div>
        <h1>–†–µ–º–æ–Ω—Ç –°–ü–±</h1>
      </a>

      <nav aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
        <ul>
          <li><a href="./works.html">–ù–∞—à–∏ —Ä–∞–±–æ—Ç—ã</a></li>
          <li><a href="./services.html">–£—Å–ª—É–≥–∏ & —Ü–µ–Ω—ã</a></li>
        </ul>
      </nav>

      <div style="display: flex; align-items: center; gap: 10px;">
        <button class="cta-header" id="openModal">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
        <div id="authControls">
         
          <button id="logoutBtn" class="btn-ghost" style="display:none;">–í—ã–π—Ç–∏</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container" style="margin-top:100px">
    <h2 class="title" style="text-align:center">–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</h2>

    <!-- –ü–∞–Ω–µ–ª—å –ª–æ–≥–∏–Ω–∞ -->
    <div id="loginPanel" style="display: none; margin: 30px auto; max-width: 400px; text-align: center;">
      <h3>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
      <form id="loginForm">
        <input type="text" id="login" placeholder="–õ–æ–≥–∏–Ω" required />
        <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required />
        <button type="submit" class="btn-hero">–í–æ–π—Ç–∏</button>
      </form>
    </div>

    <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
    <div id="adminPanel" style="margin:20px 0; display:none;">
      <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h3>
      <form id="projectForm">
        <input type="text" id="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞" required />
        <input type="text" id="meta" placeholder="–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Ü–µ–Ω–∞, –º–µ—Ç—Ä–∞–∂, —Å—Ä–æ–∫)" required />
        <textarea id="desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" required></textarea>
        <input type="file" id="imageFile" accept="image/*" required />
        <img id="previewImage" style="max-width: 200px; display: none; margin-top: 10px;" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" />
        <button type="submit" class="btn-hero">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
      </form>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
    <div id="projectsList" class="projects-grid" style="margin-top:30px;"></div>
  </main>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –∑–∞—è–≤–∫–∏ -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</h3>
      <p style="margin:0 0 12px;color:#475569">–ú—ã –ø–µ—Ä–µ–∑–≤–æ–Ω–∏–º –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –∏ –Ω–∞–∑–Ω–∞—á–∏–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤—ã–µ–∑–¥ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.</p>
      <form id="modalForm">
        <input name="mname" placeholder="–í–∞—à–µ –∏–º—è" required />
        <input name="mphone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required />
        <textarea name="mdesc" placeholder="–ö–æ—Ä–æ—Ç–∫–æ –æ –∑–∞–¥–∞—á–µ" rows="3"></textarea>
        <div style="display:flex;gap:10px;margin-top:8px">
          <button class="btn-hero" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          <button type="button" class="btn-ghost" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </form>
    </div>
  </div>

  <!-- –í–µ—Å—å JS -->
 <script>
const projectsList = document.getElementById("projectsList");
const form = document.getElementById("projectForm");
const adminPanel = document.getElementById("adminPanel");
const imageInput = document.getElementById("imageFile");
const preview = document.getElementById("previewImage");
const loginForm = document.getElementById("loginForm");
const loginPanel = document.getElementById("loginPanel");
const logoutBtn = document.getElementById("logoutBtn");

let imageDataURL = null;
let isAdmin = false;

// üîπ –°–∫—Ä—ã—Ç—ã–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ 5 –∫–ª–∏–∫–æ–≤ –ø–æ –ª–æ–≥–æ—Ç–∏–ø—É
let logoClickCount = 0;
const logo = document.querySelector(".title");
logo?.addEventListener("click", () => {
  logoClickCount++;
  if (logoClickCount >= 5) {
    loginPanel.style.display = "block"; // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
    logoClickCount = 0; // —Å–±—Ä–æ—Å —Å—á—ë—Ç—á–∏–∫–∞
  }
});

const ADMIN_LOGIN = "mars";
const ADMIN_PASSWORD = "19987";

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
function checkAuth() {
  isAdmin = localStorage.getItem("isAdmin") === "true";
  toggleAdminUI(isAdmin);
  renderProjects();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
function toggleAdminUI(isAdmin) {
  if (isAdmin) {
    adminPanel.style.display = "block";
    loginPanel.style.display = "none";
    logoutBtn.style.display = "inline-block";
  } else {
    adminPanel.style.display = "none";
    loginPanel.style.display = "none";
    logoutBtn.style.display = "none";
  }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –ª–æ–≥–∏–Ω–∞
loginForm?.addEventListener("submit", (e) => {
  e.preventDefault();
  const login = document.getElementById("login").value;
  const password = document.getElementById("password").value;

  if (login === ADMIN_LOGIN && password === ADMIN_PASSWORD) {
    localStorage.setItem("isAdmin", "true");
    isAdmin = true;
    toggleAdminUI(true);
    renderProjects();
  } else {
    alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å");
  }
});

// –í—ã—Ö–æ–¥
logoutBtn?.addEventListener("click", () => {
  localStorage.removeItem("isAdmin");
  isAdmin = false;
  toggleAdminUI(false);
  renderProjects();
});

// –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –ø—Ä–æ–µ–∫—Ç—ã, –º–æ–¥–∞–ª–∫–∞) —É —Ç–µ–±—è –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
checkAuth();
</script>

</body>
</html>
